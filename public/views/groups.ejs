<!DOCTYPE html>
<html>
<%- include('partials/head'); %>
<!-- libraries  -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>  
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<body>
    <%- include('partials/navs/mainNavigation'); %>
        <div class="container">
            <!-- page title -->
            <h1>Bienvenido a JUMIs - Grupos</h1>
            <div class="row">
                <div class="col">
                    <div>
                        <h3>Encuentra grupos cerca de ti</h3>
                        <!-- top form -->                       
                        <form><input      
                            id="search_input"
                            class="form-control"
                            type="text"
                            placeholder="Buscador"/>
                        </form><br>
                        <!-- Places Search Box function    -->
                        <script>
                            var searchBox = 'search_input';
                            $(document).ready(function () {   
                                var autocomplete;
                                autocomplete = new google.maps.places.Autocomplete((document.getElementById(searchBox)), {
                                    types: ['geocode'],
                                });
                                google.map.event.addListener (autocomplete, 'place_changed', function () {
                                    var near_place = autocomplete.getPlace();
                                });
                            });
                        </script>
                    </div>
                    <!-- map dimensions-->
                    <div class="col">
                        <div id="googleMap" style="width:100%;height:400px;"></div>	
                        <script>
                            // <!-- map location-->    
                            function myMap() {
                                var mapProp= {
                                        center:new google.maps.LatLng(37.7749,-122.4194),
                                        zoom:12,
                                    };
                                    var map = new google.maps.Map(document.getElementById("googleMap"),mapProp);                            
                                    //----------------Group Coodinates to be added
                                    addMarker({coords:{lat:37.7749,lng:-122.4194},
                                    content:'<p>Nombre del Grupo: XXXXX<p>Estimado de personas: XXXX<p> Parroquía: XXXXXX <p> Localizacíon: XXXXX </p>'});
                                    addMarker({coords:{lat:37.7849,lng:-122.4594},
                                    content:'<p>Nombre del Grupo: XXXXX<p>Estimado de personas: XXXX<p> Parroquía: XXXXXX <p> Localizacíon: XXXXX </p>'});
                                    addMarker({coords:{lat:37.7849,lng:-122.4294},
                                    content:'<p>Nombre del Grupo: XXXXX<p>Estimado de personas: XXXX<p> Parroquía: XXXXXX <p> Localizacíon: XXXXX </p>'});
                                    //Markers/ Map icon
                                    function addMarker(props){
                                        var marker = new google.maps.Marker({
                                            position:props.coords,
                                            map:map 
                                        });
                                        // check description
                                        if(props.content){
                                        
                                        var infoWindow = new google.maps.InfoWindow({
                                            content:props.content 
                                        });
                                        marker.addListener('click', function(){
                                            infoWindow.open(map, marker);
                                        });
                                    }                               
                                    
                                } 
                            }  
                            // Listen for the event fired when the user selects a prediction and retrieve
                            // more details for that place.
                            // searchBox.addListener("places_changed", () => {
                            //     const places = searchBox.getPlaces();

                            //     if (places.length == 0) {
                            //     return;
                            //     }
                            //     // Clear out the old markers.
                            //     markers.forEach((marker) => {
                            //     marker.setMap(null);
                            //     });
                            //     markers = [];
                            //     // For each place, get the icon, name and location.
                            //     const bounds = new google.maps.LatLngBounds();
                            //     places.forEach((place) => {
                            //     if (!place.geometry || !place.geometry.location) {
                            //         console.log("Returned place contains no geometry");
                            //         return;
                            //     }
                            //     const icon = {
                            //         url: place.icon,
                            //         size: new google.maps.Size(71, 71),
                            //         origin: new google.maps.Point(0, 0),
                            //         anchor: new google.maps.Point(17, 34),
                            //         scaledSize: new google.maps.Size(25, 25),
                            //     };
                            //     // Create a marker for each place.
                            //     markers.push(
                            //         new google.maps.Marker({
                            //         map,
                            //         icon,
                            //         title: place.name,
                            //         position: place.geometry.location,
                            //         })
                            //     );

                            //     if (place.geometry.viewport) {
                            //         // Only geocodes have viewport.
                            //         bounds.union(place.geometry.viewport);
                            //     } else {
                            //         bounds.extend(place.geometry.location);
                            //     }
                            //     });
                            //     map.fitBounds(bounds);
                            // });

                        </script>
                          <!-- Google Maps JavaScript library -->
                        <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&libraries=places&key=AIzaSyDzbJOP4lcUeZdKD2dASMvYblRK9iLHKaQ&callback=myMap"></script>
                        <!-- <script>src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDzbJOP4lcUeZdKD2dASMvYblRK9iLHKaQ&callback=initAutocomplete&libraries=places&v=myMap"async</script>                        -->
                        <br>
                    </div>
                </div>
            </div>
        </div>
    <%- include('partials/navs/footer'); %>    
</body>
<%- include('partials/scripts'); %>
</html>
